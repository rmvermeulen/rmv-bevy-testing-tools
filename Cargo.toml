[package]
name = "rmv-bevy-testing-tools"
version = "0.7.1"
edition = "2021"
license = "MIT"
description = "Write simple tests for bevy systems, using rstest, insta, and speculoos."
readme = "Readme.md"
repository = "https://github.com/rmvermeulen/rmv-bevy-testing-tools"

[features]
# provides the `TestApp` and it's traits
default = []
# everything, for convenience
all = ["insta", "rstest", "speculoos", "itertools", "traits", "events"]
# exports `set_snapshot_suffix!()` to allow parameterized tests to use snapshots
insta = ["dep:insta"]
# provides some baseline `TestApp`-fixtures
rstest = [
    "dep:rstest",
    "dep:rstest_reuse",
    "dep:bevy_pbr",
    "dep:bevy_render",
    "dep:bevy_state",
]
# provides `IsContainedIn::is_contained_in` extension
speculoos = ["dep:speculoos"]
# add `ImmediateQuery::query_vec` for convenience
iter_tools = ["itertools"]    # remove before 0.8
itertools = ["dep:itertools"]
events = ["dep:bevy_ecs"]
# provides all traits
traits = [
    "trait_manage_state",
    "trait_send_events",
    "trait_collect_events",
    "trait_query",
]
trait_manage_state = ["dep:bevy_state"]
trait_send_events = ["events", "dep:bevy_ecs"]
trait_collect_events = ["events", "dep:bevy_ecs"]
trait_query = ["dep:bevy_ecs"]

[dependencies]
bevy_app = { version = "^0.16", default-features = false }
bevy_asset = { version = "^0.16", optional = true }
bevy_derive = { version = "^0.16", default-features = false }
bevy_ecs = { version = "^0.16", optional = true }
bevy_internal = { version = "^0.16", default-features = false }
bevy_pbr = { version = "^0.16", optional = true }
bevy_reflect = { version = "^0.16", default-features = false, optional = true }
bevy_render = { version = "^0.16", default-features = false, optional = true }
bevy_state = { version = "^0.16", optional = true }
bevy_time = { version = "^0.16", default-features = false, optional = true }
bevy_utils = { version = "^0.16", default-features = false }
bevy_window = { version = "^0.16" }
insta = { version = "^1.43", optional = true }
itertools = { version = "^0.14.0", optional = true }
konst = "0.4.2"
rstest = { version = "^0.26", optional = true }
rstest_reuse = { version = "^0.7.0", optional = true }
speculoos = { version = "^0.13.0", optional = true }
static_assertions = { version = "1.1.0", features = ["nightly"] }

[dev-dependencies]
bevy = { version = "^0.16", default-features = false, features = [
    "bevy_render",
    "bevy_state",
] }
bevy_ecs = { version = "^0.16", default-features = false }
rstest = "^0.26.1"
rstest_reuse = "~0.7.0"
speculoos = "^0.13.0"


[build-dependencies]
rustversion = "^1.0.22"
